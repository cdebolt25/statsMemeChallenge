---
title: "Selection Bias & Missing Data Challenge - Part 2"
subtitle: "Creating a Statistics Meme: Visualizing Selection Bias"
format:
  html: default
execute:
  echo: true
  eval: true
---

# üé® Selection Bias & Missing Data Challenge - Part 2

::: {.callout-important}
## üìä Challenge Requirements

**Your Task:** Create a four-panel statistics meme demonstrating selection bias using your original image and stippled version from [Part 1](https://flyaflya.github.io/stippleChallenge/).

**Prerequisites:** Completed [Part 1](https://flyaflya.github.io/stippleChallenge/) with:

1. Your original image file
2. Your stippled image (numpy array or R matrix)
3. Image dimensions (height and width)

**Deliverables:**

1. Four-panel meme (1√ó4 or 2√ó2 layout) with labels: Reality, Your Model, Selection Bias, Estimate
2. Code (Python or R) that generates the meme
3. GitHub Pages site named "statsMemeChallenge" with your meme and explanation

**Repository Information:**

- **Source/Starter File:** Available in the main repository at [https://github.com/flyaflya/statsMemeChallenge](https://github.com/flyaflya/statsMemeChallenge)
- **Challenge Read Online:** View the challenge instructions at [https://flyaflya.github.io/statsMemeChallenge](https://flyaflya.github.io/statsMemeChallenge)
- **Your Submission:** Fork this challenge and create your GitHub Pages site at `https://[your-username].github.io/statsMemeChallenge/`
:::

## The Problem: Visualizing Selection Bias

Selection bias occurs when observed data isn't representative of the population. Your meme will show:

- **Reality**: Your original image (truth)
- **Your Model**: Your stippled image (representation)
- **Selection Bias**: A bold letter "S" (systematic missing data pattern)
- **Estimate**: Stippled image with "S" mask applied (biased estimate)

**Key Concept:** Images are simply matrices‚Äî2D arrays where each value represents a pixel (0.0 = black, 1.0 = white). Your stippled image is a matrix with black dots (data points) on a white background. Selection bias removes some of these pixels (data points) in a systematic pattern (the "S"), creating a biased estimate. You'll use image composition tools (matplotlib in Python, imager in R) to arrange these matrices into a memorable visualization.

## Exemplar

![Exemplar statistics meme showing the four-panel structure: Reality (original image), Your Model (stippled version), Selection Bias (letter S), and Estimate (masked stippled image)](statistics_meme.png)

**Your Goal:** Recreate this structure using **your own** original and stippled images from [Part 1](https://flyaflya.github.io/stippleChallenge/).

## Why This Matters

This exercise is fundamentally about **walking AI through a process** to create valuable output. You're not just coding‚Äîyou're collaborating with AI to transform abstract statistical concepts into a memorable visual artifact. The meme you create will serve as a mental anchor: whenever you think about selection bias in the future, you'll ask yourself: **"Does my sample match my population of interest?"** This visualization will stick with you for the rest of your life, making it easier to recognize and address selection bias in real-world data analysis.

## Getting Started: Repository Setup üöÄ

::: {.callout-important}
## üìÅ Repository Setup Instructions

**Step 1:** Fork the starter repository:

- Navigate to [https://github.com/flyaflya/statsMemeChallenge](https://github.com/flyaflya/statsMemeChallenge)
- Fork the repository to your GitHub account (this creates `https://github.com/[your-username]/statsMemeChallenge`)

**Step 2:** Clone your forked repository locally using Cursor (or VS Code)

**Step 3:** Set up GitHub Pages:

- Go to your repository settings (click the "Settings" tab in your GitHub repository)
- Scroll down to the "Pages" section in the left sidebar
- Under "Source", select "Deploy from a branch"
- Choose "main" branch and "/ (root)" folder
- Click "Save"
- Your site will be available at: `https://[your-username].github.io/statsMemeChallenge/`
- **Note:** It may take a few minutes for the site to become available after enabling Pages

**Step 4:** You're ready to start! Use the `index.qmd` file as your starting point.
:::

## Implementation Guide

::: {.callout-important}
## üìù Code Visibility in Final HTML

**Important:** When you create your final `index.qmd` file, use `echo: false` for all code chunks that generate the meme. The rendered HTML should show only the meme image and your explanation, not the code. The code should still be in the `.qmd` file (so it can be rendered), but it won't be displayed in the HTML output.
:::

## Original and Stippled Images

**Original Image:**

![Original Florida beach image before stippling.](florida_beach_picture.jpg){width=60%}

**Final Stippled Image:**

The completed blue noise stippling of your image:

![Final blue noise stippling of the Florida beach image. This stippled version preserves the visual information of the original image using approximately 13,885 carefully placed dots.](stippled_image.png)

## Progressive Stippling Animation

![Progressive stippling animation showing the sequential build-up of points. Each frame represents an increment of 100 points, demonstrating how the blue noise stippling pattern develops as more points are added.](progressive_stippling.gif)

## Creating the Four-Panel Statistics Meme

The following code generates the complete four-panel meme demonstrating selection bias:

```{python}
#| label: create-meme
#| echo: false
#| fig-width: 16
#| fig-height: 4
#| dpi: 200

import numpy as np
from PIL import Image, ImageDraw, ImageFont
import matplotlib.pyplot as plt
import platform

# Step 1: Load original image
original_img = Image.open('florida_beach_picture.jpg')
if original_img.mode != 'L':
    original_img = original_img.convert('L')
original_array = np.array(original_img, dtype=np.float32) / 255.0
height, width = original_array.shape

# Step 2: Load stippled image
stippled_img = Image.open('stippled_image.png')
if stippled_img.mode != 'L':
    stippled_img = stippled_img.convert('L')
stipple_array = np.array(stippled_img, dtype=np.float32) / 255.0

# Ensure stippled image matches original dimensions
if stipple_array.shape != original_array.shape:
    stippled_img = stippled_img.resize((width, height), Image.Resampling.LANCZOS)
    stipple_array = np.array(stippled_img, dtype=np.float32) / 255.0

# Step 3: Create the bold letter "S" matrix
# Create white background
s_image = Image.new('L', (width, height), color=255)
draw = ImageDraw.Draw(s_image)

# Try to use a bold font, fallback to default if not available
font_size = int(height * 0.85)
font = None

# Try to load a bold font - attempt common system fonts
system = platform.system()

if system == "Windows":
    font_paths = [
        "C:/Windows/Fonts/arialbd.ttf",
        "C:/Windows/Fonts/Arial Bold.ttf",
        "arial.ttf"
    ]
elif system == "Darwin":  # macOS
    font_paths = [
        "/System/Library/Fonts/Supplemental/Arial Bold.ttf",
        "/Library/Fonts/Arial Bold.ttf"
    ]
else:  # Linux
    font_paths = [
        "/usr/share/fonts/truetype/dejavu/DejaVuSans-Bold.ttf",
        "/usr/share/fonts/truetype/liberation/LiberationSans-Bold.ttf",
        "/usr/share/fonts/truetype/arial.ttf"
    ]

for font_path in font_paths:
    try:
        font = ImageFont.truetype(font_path, font_size)
        break
    except:
        continue

# If no font found, use default font
if font is None:
    font = ImageFont.load_default()

# Calculate text position to center the "S"
text = "S"
bbox = draw.textbbox((0, 0), text, font=font)
text_width = bbox[2] - bbox[0]
text_height = bbox[3] - bbox[1]
x = (width - text_width) // 2
y = (height - text_height) // 2

# Draw the "S" in black
draw.text((x, y), text, fill=0, font=font)

# Convert to array and normalize (0.0 = black, 1.0 = white)
s_array = np.array(s_image, dtype=np.float32) / 255.0

# Step 4: Create the masked estimate
# Create binary mask: where S is black (value < 0.5), that's the mask
threshold = 0.5
mask = s_array < threshold

# Apply mask: where S is black, remove stipples (set to white)
masked_estimate = stipple_array.copy()
masked_estimate[mask] = 1.0  # Set masked areas to white

# Step 5: Assemble the four-panel meme
fig, axes = plt.subplots(1, 4, figsize=(16, 4))
fig.patch.set_facecolor('#FFE5E5')  # Light pink background

# Panel 1: Reality (Original Image)
axes[0].imshow(original_array, cmap='gray', vmin=0, vmax=1)
axes[0].set_title('Reality', fontsize=14, fontweight='bold', pad=10)
axes[0].axis('off')

# Panel 2: Your Model (Stippled Image)
axes[1].imshow(stipple_array, cmap='gray', vmin=0, vmax=1)
axes[1].set_title('Your Model', fontsize=14, fontweight='bold', pad=10)
axes[1].axis('off')

# Panel 3: Selection Bias (Letter S)
axes[2].imshow(s_array, cmap='gray', vmin=0, vmax=1)
axes[2].set_title('Selection Bias', fontsize=14, fontweight='bold', pad=10)
axes[2].axis('off')

# Panel 4: Estimate (Masked Stippled Image)
axes[3].imshow(masked_estimate, cmap='gray', vmin=0, vmax=1)
axes[3].set_title('Estimate', fontsize=14, fontweight='bold', pad=10)
axes[3].axis('off')

plt.tight_layout(pad=0.5)
plt.savefig('selection_bias_meme.png', dpi=200, bbox_inches='tight', facecolor='#FFE5E5')
plt.show()
```

## The Four-Panel Statistics Meme

![Four-panel statistics meme demonstrating selection bias: Reality (original beach image), Your Model (stippled version), Selection Bias (bold letter S), and Estimate (masked stippled image showing missing data in S pattern)](selection_bias_meme.png)

## Understanding Selection Bias Through This Visualization

Selection bias is a fundamental problem in statistics and data science that occurs when the data we observe is not representative of the population we want to study. This four-panel meme provides a powerful visual metaphor for understanding this concept:

1. **Reality** (Panel 1): The original image represents the true population‚Äîthe complete, unbiased reality we want to understand. Every pixel contains information about the full picture.

2. **Your Model** (Panel 2): The stippled image represents our data collection method. We've sampled the population using blue noise stippling, creating a representation that preserves the essential visual information through carefully placed data points (black dots). This is our "model" of reality‚Äîit's not perfect, but it captures the key features.

3. **Selection Bias** (Panel 3): The bold letter "S" represents a systematic pattern of missing data. In real-world scenarios, selection bias might occur because:
   - Certain groups are systematically excluded from surveys
   - Data collection methods miss specific regions or demographics
   - Response rates vary systematically across populations
   - Sampling frames are incomplete or biased

4. **Estimate** (Panel 4): When we apply the selection bias pattern to our model, we see the biased estimate. Notice how the "S" shape creates a systematic gap in our data‚Äîwe're missing information in a non-random pattern. This biased sample no longer accurately represents the original population, leading to incorrect conclusions.

**The Key Insight:** Just as the "S" pattern distorts our view of the beach scene, selection bias distorts our understanding of populations in real data analysis. The missing data isn't random‚Äîit follows a systematic pattern that can lead us to draw incorrect conclusions about the population of interest.

**Real-World Applications:** This visualization helps us remember to always ask: **"Does my sample match my population of interest?"** Whether analyzing survey data, clinical trials, or business metrics, selection bias can silently undermine our conclusions. By recognizing systematic patterns of missing data, we can take steps to correct for bias or acknowledge the limitations of our analysis.

## Tips for Success

1. **Font Selection**: Use bold fonts (Arial Bold, DejaVu Sans Bold) for the "S"
2. **Threshold Tuning**: Adjust `threshold` (typically 0.5) for clean mask edges
3. **Spacing**: Minimize gaps between panels (`wspace=0`, `hspace=0`)
4. **Background**: Light pink background helps panels stand out
5. **Save Quality**: Use DPI 150-300 for crisp output
6. **Layout Choice**: 1√ó4 for wide images, 2√ó2 for square/tall images

## Submission Requirements

**Important:** Your final GitHub Pages site should be a clean, professional presentation that focuses on the meme and explanation, not the code.

**Repository Contents:**

- [ ] `index.qmd` file with your code to generate the meme
- [ ] Any supporting code files (Python `.py` files or R scripts) that your `index.qmd` references
- [ ] Your original image and stippled image files (or `.npy`/`.rds` files) needed to generate the meme
- [ ] Rendered HTML output (generated by rendering the `index.qmd` file)

**HTML Output Requirements:**

- [ ] **Code should NOT be visible** in the rendered HTML (use `echo: false` for code chunks that generate the meme)
- [ ] The HTML should display **only the four-panel meme image**
- [ ] Include a **brief explanation** of selection bias and how your meme demonstrates it
- [ ] Professional, clean presentation suitable for sharing

**Submission Checklist:**

- [ ] All four panels: Reality, Your Model, Selection Bias, Estimate
- [ ] Clear labels on each panel
- [ ] Bold, properly-sized "S" letter
- [ ] Masked estimate correctly removes stipples within "S"
- [ ] Clean layout with minimal spacing
- [ ] Code runs without errors and generates the meme
- [ ] `index.qmd` file in repository with `echo: false` for meme generation code
- [ ] Supporting code files (if any) included in repository
- [ ] Document rendered to HTML successfully (meme generated, code hidden)
- [ ] HTML files uploaded to your repository
- [ ] GitHub Pages enabled and working
- [ ] Site accessible at `https://[your-username].github.io/statsMemeChallenge/`
- [ ] Final site shows only the meme and explanation (no visible code)
- [ ] Brief explanation of selection bias included in HTML

**Remember:** Create a memorable, educational visualization that helps others understand selection bias. This is about more than completing an assignment‚Äîit's about building a lasting understanding through creative collaboration with AI.

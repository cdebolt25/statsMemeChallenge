---
title: "Selection Bias & Missing Data Challenge - Part 2"
subtitle: "Creating a Statistics Meme: Visualizing Selection Bias"
format:
  html: default
execute:
  echo: false
  eval: true
---

# ðŸŽ¨ Selection Bias & Missing Data Challenge - Part 2

## Original and Stippled Images

**Original Image:**

![Original Florida beach image before stippling.](florida_beach_picture.jpg){width=60%}

**Final Stippled Image:**

The completed blue noise stippling of your image:

![Final blue noise stippling of the Florida beach image. This stippled version preserves the visual information of the original image using approximately 13,885 carefully placed dots.](stippled_image.png)

## Progressive Stippling Animation

![Progressive stippling animation showing the sequential build-up of points. Each frame represents an increment of 100 points, demonstrating how the blue noise stippling pattern develops as more points are added.](progressive_stippling.gif)

## Creating the Four-Panel Statistics Meme

The following code generates the complete four-panel meme demonstrating selection bias:

```{python}
#| label: create-meme
#| echo: false
#| fig-width: 16
#| fig-height: 4
#| dpi: 200

import numpy as np
from PIL import Image, ImageDraw, ImageFont
import matplotlib.pyplot as plt
import platform

# Step 1: Load original image
original_img = Image.open('florida_beach_picture.jpg')
if original_img.mode != 'L':
    original_img = original_img.convert('L')
original_array = np.array(original_img, dtype=np.float32) / 255.0
height, width = original_array.shape

# Step 2: Load stippled image
stippled_img = Image.open('stippled_image.png')
if stippled_img.mode != 'L':
    stippled_img = stippled_img.convert('L')
stipple_array = np.array(stippled_img, dtype=np.float32) / 255.0

# Ensure stippled image matches original dimensions
if stipple_array.shape != original_array.shape:
    stippled_img = stippled_img.resize((width, height), Image.Resampling.LANCZOS)
    stipple_array = np.array(stippled_img, dtype=np.float32) / 255.0

# Step 3: Create the bold letter "S" matrix
# Create white background
s_image = Image.new('L', (width, height), color=255)
draw = ImageDraw.Draw(s_image)

# Try to use a bold font, fallback to default if not available
font_size = int(height * 0.85)
font = None

# Try to load a bold font - attempt common system fonts
system = platform.system()

if system == "Windows":
    font_paths = [
        "C:/Windows/Fonts/arialbd.ttf",
        "C:/Windows/Fonts/Arial Bold.ttf",
        "arial.ttf"
    ]
elif system == "Darwin":  # macOS
    font_paths = [
        "/System/Library/Fonts/Supplemental/Arial Bold.ttf",
        "/Library/Fonts/Arial Bold.ttf"
    ]
else:  # Linux
    font_paths = [
        "/usr/share/fonts/truetype/dejavu/DejaVuSans-Bold.ttf",
        "/usr/share/fonts/truetype/liberation/LiberationSans-Bold.ttf",
        "/usr/share/fonts/truetype/arial.ttf"
    ]

for font_path in font_paths:
    try:
        font = ImageFont.truetype(font_path, font_size)
        break
    except:
        continue

# If no font found, use default font
if font is None:
    font = ImageFont.load_default()

# Calculate text position to center the "S"
text = "S"
bbox = draw.textbbox((0, 0), text, font=font)
text_width = bbox[2] - bbox[0]
text_height = bbox[3] - bbox[1]
x = (width - text_width) // 2
y = (height - text_height) // 2

# Draw the "S" in black
draw.text((x, y), text, fill=0, font=font)

# Convert to array and normalize (0.0 = black, 1.0 = white)
s_array = np.array(s_image, dtype=np.float32) / 255.0

# Step 4: Create the masked estimate
# Create binary mask: where S is black (value < 0.5), that's the mask
threshold = 0.5
mask = s_array < threshold

# Apply mask: where S is black, remove stipples (set to white)
masked_estimate = stipple_array.copy()
masked_estimate[mask] = 1.0  # Set masked areas to white

# Step 5: Assemble the four-panel meme
fig, axes = plt.subplots(1, 4, figsize=(16, 4))
fig.patch.set_facecolor('#FFE5E5')  # Light pink background

# Panel 1: Reality (Original Image)
axes[0].imshow(original_array, cmap='gray', vmin=0, vmax=1)
axes[0].set_title('Reality', fontsize=14, fontweight='bold', pad=10)
axes[0].axis('off')

# Panel 2: Your Model (Stippled Image)
axes[1].imshow(stipple_array, cmap='gray', vmin=0, vmax=1)
axes[1].set_title('Your Model', fontsize=14, fontweight='bold', pad=10)
axes[1].axis('off')

# Panel 3: Selection Bias (Letter S)
axes[2].imshow(s_array, cmap='gray', vmin=0, vmax=1)
axes[2].set_title('Selection Bias', fontsize=14, fontweight='bold', pad=10)
axes[2].axis('off')

# Panel 4: Estimate (Masked Stippled Image)
axes[3].imshow(masked_estimate, cmap='gray', vmin=0, vmax=1)
axes[3].set_title('Estimate', fontsize=14, fontweight='bold', pad=10)
axes[3].axis('off')

plt.tight_layout(pad=0.5)
plt.savefig('selection_bias_meme.png', dpi=200, bbox_inches='tight', facecolor='#FFE5E5')
plt.show()
```

## The Four-Panel Statistics Meme

![Four-panel statistics meme demonstrating selection bias: Reality (original beach image), Your Model (stippled version), Selection Bias (bold letter S), and Estimate (masked stippled image showing missing data in S pattern)](selection_bias_meme.png)

## Understanding Selection Bias Through This Visualization

Selection bias is a fundamental problem in statistics and data science that occurs when the data we observe is not representative of the population we want to study. This four-panel meme provides a powerful visual metaphor for understanding this concept:

1. **Reality** (Panel 1): The original image represents the true populationâ€”the complete, unbiased reality we want to understand. Every pixel contains information about the full picture.

2. **Your Model** (Panel 2): The stippled image represents our data collection method. We've sampled the population using blue noise stippling, creating a representation that preserves the essential visual information through carefully placed data points (black dots). This is our "model" of realityâ€”it's not perfect, but it captures the key features.

3. **Selection Bias** (Panel 3): The bold letter "S" represents a systematic pattern of missing data. In real-world scenarios, selection bias might occur because:
   - Certain groups are systematically excluded from surveys
   - Data collection methods miss specific regions or demographics
   - Response rates vary systematically across populations
   - Sampling frames are incomplete or biased

4. **Estimate** (Panel 4): When we apply the selection bias pattern to our model, we see the biased estimate. Notice how the "S" shape creates a systematic gap in our dataâ€”we're missing information in a non-random pattern. This biased sample no longer accurately represents the original population, leading to incorrect conclusions.

**The Key Insight:** Just as the "S" pattern distorts our view of the beach scene, selection bias distorts our understanding of populations in real data analysis. The missing data isn't randomâ€”it follows a systematic pattern that can lead us to draw incorrect conclusions about the population of interest.

**Real-World Applications:** This visualization helps us remember to always ask: **"Does my sample match my population of interest?"** Whether analyzing survey data, clinical trials, or business metrics, selection bias can silently undermine our conclusions. By recognizing systematic patterns of missing data, we can take steps to correct for bias or acknowledge the limitations of our analysis.

